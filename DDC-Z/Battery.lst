C51 COMPILER V9.54   BATTERY                                                               06/04/2017 11:50:54 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE BATTERY
OBJECT MODULE PLACED IN .\Battery.obj
COMPILER INVOKED BY: D:\Program Files\Keil_v5\C51\BIN\C51.EXE ..\Library\Battery.c COMPACT ROM(COMPACT) OPTIMIZE(8,SPEED
                    -) BROWSE INCDIR(..\Library) DEBUG OBJECTEXTEND PRINT(.\Battery.lst) TABS(2) OBJECT(.\Battery.obj)

line level    source

   1          /*---------------------------------------------------
   2            Battery.c (v1.00)
   3          <<<<<<< HEAD
   4            Battery201603（70km60V）r1
   5          =======
   6            Battery201603（90km72V）r1
   7          >>>>>>> c6e65e4f0b4864e969ea86603842dc8b6ee1929b
   8          ---------------------------------------------------*/
   9          
  10          #include "main.h"
  11          #include "port.h"
  12          
  13          #include "Battery.h"
  14          #include "voice.h"
  15          #include "Delay.h"
  16          #include "AD.h"
  17          <<<<<<< HEAD
*** ERROR C141 IN LINE 17 OF ..\Library\Battery.c: syntax error near '<<'
  18          #define Max_battery 0x291
  19          =======
*** ERROR C129 IN LINE 19 OF ..\Library\Battery.c: missing ';' before '=='
  20          #define Max_battery 0x317
*** WARNING C317 IN LINE 20 OF ..\Library\Battery.c: attempt to redefine macro 'Max_battery'
  21          >>>>>>> c6e65e4f0b4864e969ea86603842dc8b6ee1929b
  22          
  23          extern tWord ADC_check_result;    
  24          extern tWord load_battery_result;
  25          tByte Check2_stage = 0;
  26          tByte Battery_level = 0;
  27          
  28          /*----------------------------------------------------
  29            Check_motor_accumulator() - 48V 电平
  30            Check P20's voltage.
  31          -----------------------------------------------------*/
  32          void Check_motor_accumulator(void)
  33            {
  34            // detect the battery voltage
  35            ADC_check_result = GetADCResult(6);
  36            }
  37          /*-----------------------------------------
  38            Broadcast_battery()
  39            
  40            你好
  41          ------------------------------------------*/
  42          void Broadcast_battery(void)
  43            {
  44            if((ADC_check_result < load_battery_result)||(ADC_check_result > Max_battery))
  45              {
  46              load_battery_result = ADC_check_result;
  47              } 
  48            verifybattery(load_battery_result);     
  49            }
  50          
  51          
C51 COMPILER V9.54   BATTERY                                                               06/04/2017 11:50:54 PAGE 2   

  52          /*----------------------------------------------------
  53            verifybattery()
  54            voice alarm for battery status with power module
  55          -----------------------------------------------------*/
  56          void verifybattery(tWord Check2)
  57            { 
  58            #ifdef Kilometer_65
  59            // 
  60            voice_EN = 1;
  61          <<<<<<< HEAD
  62            if(Check2<0x25f)
  63              {
  64              SC_Speech(39);      // 甸涓瓒
  65              Delay(50);
  66              }
  67            else if(Check2 > 0x291)
  68              {   
  69              SC_Speech(8);   
  70              Delay(70);      
  71              SC_Speech(18);      // 7
  72              Delay(30);
  73          =======
  74            SC_Speech(8);   
  75            Delay(70);  
  76            // 多少
  77            if(Check2 < 0x2a8)
  78              {
  79              SC_Speech(14);      // 3
  80              Delay(30);
  81              }
  82            else if((Check2 >= 0x2a8)&&(Check2 < 0x2b6))
  83              {
  84              SC_Speech(18);      // 7
  85              Delay(30);
  86              }
  87            else if((Check2 >= 0x2b6)&&(Check2 < 0x2c7))
  88              {
  89              SC_Speech(21);      // 10
  90              Delay(30);
  91              SC_Speech(16);      // 5
  92              Delay(30);
  93              }
  94            else if((Check2 >= 0x2c7)&&(Check2 < 0x2d8))
  95              {
  96              SC_Speech(13);      // 2
  97              Delay(30);
  98              SC_Speech(21);      // 10
  99              Delay(30);
 100              SC_Speech(12);      // 1
 101              Delay(30);
 102              }
 103            else if((Check2 >= 0x2d8)&&(Check2 < 0x2e2))
 104              {
 105              SC_Speech(13);      // 2
 106              Delay(30);
 107              SC_Speech(21);      // 10
 108              Delay(30);
 109              SC_Speech(19);      // 8
 110              Delay(30);
 111              }
 112            else if((Check2 >= 0x2e2)&&(Check2 < 0x2ec))
 113              {
C51 COMPILER V9.54   BATTERY                                                               06/04/2017 11:50:54 PAGE 3   

 114              SC_Speech(14);      // 3
 115              Delay(30);
 116              SC_Speech(21);      // 10
 117              Delay(30);
 118              SC_Speech(17);      // 6
 119              Delay(30);
 120              }
 121            else if((Check2 >= 0x2ec)&&(Check2 < 0x2f7))
 122              {
 123              SC_Speech(15);      // 4
 124              Delay(30);
 125              SC_Speech(21);      // 10
 126              Delay(30);
 127              SC_Speech(14);      // 3
 128              Delay(30);
 129              }
 130            else if((Check2 >= 0x2f7)&&(Check2 < 0x302))
 131              {
 132              SC_Speech(16);      // 5
 133              Delay(30);
 134              SC_Speech(21);      // 10
 135              Delay(30);
 136              SC_Speech(12);      // 1
 137              Delay(30);
 138              }
 139            else if((Check2 >= 0x302)&&(Check2 < 0x30c))
 140              {
 141              SC_Speech(17);      // 6
 142              Delay(30);
 143              SC_Speech(21);      // 10
 144              Delay(30);
 145              }
 146            else if((Check2 >= 0x30c)&&(Check2 < 0x311))
 147              {
 148              SC_Speech(17);      // 6
 149              Delay(30);
 150              SC_Speech(21);      // 10
 151              Delay(30);
 152              SC_Speech(18);      // 7
 153              Delay(30);
 154              }
 155            else if((Check2 >= 0x311)&&(Check2 < 0x315))
 156              {
 157              SC_Speech(18);      // 7
 158              Delay(30);
 159          >>>>>>> c6e65e4f0b4864e969ea86603842dc8b6ee1929b
 160              SC_Speech(21);      // 10
 161              Delay(30);
 162              SC_Speech(11);    
 163              Delay(60);  
 164              }
 165          <<<<<<< HEAD
 166              voice_EN = 0;
 167              SC_RST = 1;
 168              Delay_50ms();
 169              SC_RST = 0;
 170              Delay_50ms();
 171          
 172          /*    if(Check2 < 0x242)
 173                {
 174                SC_Speech(13);      // 2
 175                Delay(30);
C51 COMPILER V9.54   BATTERY                                                               06/04/2017 11:50:54 PAGE 4   

 176                }
 177              else if((Check2 >= 0x242)&&(Check2 < 0x250))
 178                {
 179                SC_Speech(16);      // 5
 180                Delay(30);
 181                }
 182              else if((Check2 >= 0x250)&&(Check2 < 0x25f))
 183                {
 184                SC_Speech(21);      // 10
 185                Delay(30);
 186                }
 187            else if((Check2 >= 0x250)&&(Check2 < 0x25f))
 188                {
 189                SC_Speech(21);      // 10
 190                Delay(30);
 191                SC_Speech(17);      // 6
 192                Delay(30);
 193                }
 194              else if((Check2 >= 0x25f)&&(Check2 < 0x267))
 195                {
 196                SC_Speech(13);      // 2
 197                Delay(30);
 198                SC_Speech(21);      // 10
 199                Delay(30);
 200                SC_Speech(13);      // 2
 201                Delay(30);
 202                }
 203              else if((Check2 >= 0x267)&&(Check2 < 0x26f))
 204                {
 205                SC_Speech(13);      // 2
 206                Delay(30);
 207                SC_Speech(21);      // 10
 208                Delay(30);
 209                SC_Speech(19);      // 8
 210                Delay(30);
 211                }
 212              else if((Check2 >= 0x26f)&&(Check2 < 0x279))
 213                {
 214                SC_Speech(14);      // 3
 215                Delay(30);
 216                SC_Speech(21);      // 10
 217                Delay(30);
 218                SC_Speech(15);      // 4
 219                Delay(30);
 220                }
 221              else if((Check2 >= 0x279)&&(Check2 < 0x282))
 222                {
 223                SC_Speech(15);      // 4
 224                Delay(30);
 225                SC_Speech(21);      // 10
 226                Delay(30);
 227                }
 228              else if((Check2 >= 0x282)&&(Check2 < 0x28a))
 229                {
 230                SC_Speech(15);      // 4
 231                Delay(30);
 232                SC_Speech(21);      // 10
 233                Delay(30);
 234                SC_Speech(17);      // 6
 235                Delay(30);
 236                }
 237              else if((Check2 >= 0x28a)&&(Check2 < 0x28e))
C51 COMPILER V9.54   BATTERY                                                               06/04/2017 11:50:54 PAGE 5   

 238                {
 239                SC_Speech(16);      // 5
 240                Delay(30);
 241                SC_Speech(21);      // 10
 242                Delay(30);
 243                SC_Speech(13);      // 2
 244                Delay(30);
 245                }
 246              else if((Check2 >= 0x28e)&&(Check2 < 0x291))
 247                {
 248                SC_Speech(16);      // 5
 249                Delay(30);
 250                SC_Speech(21);      // 10
 251                Delay(30);
 252                SC_Speech(19);      // 8
 253                Delay(30);
 254                }
 255              else if((Check2 >= 0x291)&&(Check2 < Max_battery))
 256                {
 257                SC_Speech(17);      // 6
 258                Delay(30);
 259                SC_Speech(21);      // 10
 260                Delay(30);
 261                SC_Speech(15);      // 4
 262                Delay(30);
 263                }
 264              else if(Check2 >= Max_battery)
 265                {
 266                SC_Speech(18);      // 7
 267                Delay(30);
 268                SC_Speech(21);      // 10
 269                Delay(30);
 270                } 
 271              //
 272              SC_Speech(11);    
 273              Delay(60);  
 274            */    
 275          =======
 276            else if((Check2 >= 0x315)&&(Check2 < 0x317))
 277              {
 278              SC_Speech(19);      // 8
 279              Delay(30);
 280              SC_Speech(21);      // 10
 281              Delay(30);
 282              SC_Speech(13);      // 2
 283              Delay(30);
 284              }
 285            else if(Check2 >= 0x317)
 286              {
 287              SC_Speech(20);      // 9
 288              Delay(30);
 289              SC_Speech(21);      // 10
 290              Delay(30);
 291              }   
 292            // 公里
 293            SC_Speech(11);    
 294            Delay(60);  
 295            voice_EN = 0;
 296            SC_RST = 1;
 297            Delay_50ms();
 298            SC_RST = 0;
 299            Delay_50ms();
C51 COMPILER V9.54   BATTERY                                                               06/04/2017 11:50:54 PAGE 6   

 300          >>>>>>> c6e65e4f0b4864e969ea86603842dc8b6ee1929b
 301            #endif
 302            }
 303            
 304          /*---------------------------------------------------
 305            end of file
 306          ----------------------------------------------------*/

C51 COMPILATION COMPLETE.  1 WARNING(S),  2 ERROR(S)
